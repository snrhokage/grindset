---
tags:
  - javascript
links:
  - https://habr.com/ru/articles/239065/
---
Поднятие (hoisting) - термин, который вы не встретите в документации JavaScript. 

Поднятие задумывалось как общий способ мышления о том, как контекст исполнения (в частности, фазы создания и исполнения) работает в JavaScript. Однако, hoisting может привести и к недоразумениям. 

Например, hoisting учит, что объявление переменной или функции физически перемещается в начало вашего кода, хотя в действительности этого не происходит.

На самом же деле, объявления переменных и функций попадают в память в процессе фазы компиляции, но остаются в коде на том месте, где вы их объявили.

TODO: https://developer.mozilla.org/ru/docs/Glossary/Hoisting

АХУЕТЬ: https://habr.com/ru/articles/239065/

## Задачи
### 1
```js
(function() {	
	f();	
	f = function() {
		console.log(1);	
	}
})()

function f() {
	console.log(2)
}

f();
```

Объявленная в gs `function f()` всплывёт, соответственно при вызове `f` внутри анонимной функции мы увидим не `ReferenceError`, как кто-то мог предположить, а двойку в консоли, при повторном вызове переменная f уже ссылается на функцию которая печатает 1.  
  
Результат:  

```js
(function() {
	f();	
	f = function() {
		console.log(1);	
	}
})()

function f() {	
	console.log(2)
}

f();

> undefined
> 2
> 1
```
### 2
```js
(function() {
	var x = 1;	
	function x() {};	
	
	console.log(x);	
})()
```

Функции объявленный при помощи function declaration имеют больший приоритет и понимаются выше `var`. Поэтому интерпретатор сначала выполнит `function x() {};`, а затем `var x = 1`;  
  
```js
(function() {  
	var x = 1;  
  
	function x() {};  
  
	console.log(x);   
})() 

> undefined  
> 1
```

### 3
```js
var obj = {	a: 1};

(function(obj) {	
	obj = {		
		a: 2	
	};
})(obj);

console.log(obj.a);
```
При вызове анонимной функции создастся локальная переменная obj в её области видимости. А затем создаётся новый объект `{a : 2}`, ссылка на который попадает в локальную переменную obj, но переменная из верхнего скоупа будет всё так же ссылаться на старый объект.