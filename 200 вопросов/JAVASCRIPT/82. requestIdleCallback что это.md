requestIdleCallback принимает колбэк, который будет вызываться в период простоя браузера, когда цикл событий будет в режиме ожидания.